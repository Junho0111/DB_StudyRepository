# SQL - 조회와 정렬 (페이징 포함)

### 기본 조회 및 중복 제거

| 기능 | 명령어 (Syntax) | 사용 예시 (Example) |
| --- | --- | --- |
| **전체 컬럼 조회** | `SELECT * FROM [테이블명];` | `SELECT * FROM products;` |
| **특정 컬럼 조회** | `SELECT [컬1], [컬2] FROM [테이블명];` | `SELECT name, price FROM products;` |
| **별칭(Alias)** | `SELECT [컬] AS [별칭] FROM [테이블];` | `SELECT name AS 상품명 FROM products;` |
| **중복 제거** | `SELECT DISTINCT [컬] FROM [테이블];` | `SELECT DISTINCT address FROM customers;` |

<br>

### 데이터 필터링 (WHERE 절)

| 기능 | 명령어 (Syntax) | 사용 예시 (Example) |
| --- | --- | --- |
| **비교 연산** | `WHERE [컬럼] [=, !=, >, <] [값];` | `WHERE price >= 50000;` |
| **범위 검색** | `WHERE [컬럼] BETWEEN [A] AND [B];` | `WHERE price BETWEEN 10000 AND 20000;` |
| **목록 검색** | `WHERE [컬럼] IN ([값1], [값2]);` | `WHERE address IN ('서울', '경기');` |
| **패턴 매칭** | `WHERE [컬럼] LIKE '[패턴]';` | `WHERE name LIKE '프리미엄%';` |
| **NULL 확인** | `WHERE [컬럼] IS NULL;` | `WHERE phone IS NULL;` |

<br>

### 정렬 및 결과 제한 (ORDER BY & LIMIT)

| 기능 | 명령어 (Syntax) | 사용 예시 (Example) |
| --- | --- | --- |
| **오름차순 정렬** | `ORDER BY [컬럼] ASC;` | `ORDER BY price ASC;` |
| **내림차순 정렬** | `ORDER BY [컬럼] DESC;` | `ORDER BY join_date DESC;` |
| **결과 개수 제한** | `LIMIT [개수];` | `SELECT * FROM products LIMIT 5;` |

<br>

### 페이징 처리 (Paging)

페이징은 방대한 양의 데이터를 한 페이지에 모두 보여주지 않고, 나누어서 보여줄 때 사용합니다. `LIMIT` 절의 **Offset(건너뛸 개수)** 개념을 활용.

* **명령어**: `LIMIT [Offset], [Row Count];`
* **사용 예시**:

```sql
-- 1페이지: 처음부터 10개 조회 (0번부터 시작)
SELECT * FROM products ORDER BY id DESC LIMIT 0, 10;

-- 2페이지: 앞의 10개를 건너뛰고 다음 10개 조회
SELECT * FROM products ORDER BY id DESC LIMIT 10, 10;

-- 3페이지: 앞의 20개를 건너뛰고 다음 10개 조회
SELECT * FROM products ORDER BY id DESC LIMIT 20, 10;

```

* **공식**: `LIMIT (페이지번호 - 1) * 페이지당개수, 페이지당개수`
* 예: 5페이지를 보고 싶고 페이지당 20개씩 출력한다면? -> `LIMIT 80, 20`

<br>

### 시나리오별 사용 예시 (Scenario & Example)

* **패턴 매칭 및 정렬**: "상품명에 '아이폰'이 포함된 상품을 가장 비싼 순서대로 조회"
```sql
-- LIKE를 통해 검색하고 DESC로 가격이 높은 데이터부터 정렬함
SELECT name, price 
FROM products 
WHERE name LIKE '%아이폰%'
ORDER BY price DESC;

```
<br>

* **범위 검색과 중복 제거**: "주문 금액이 10만 원에서 50만 원 사이인 주문을 한 고객 명단(중복 제외) 추출"
```sql
-- BETWEEN으로 범위를 잡고 DISTINCT로 같은 고객이 여러 번 나와도 한 번만 표시함
SELECT DISTINCT customer_name 
FROM orders 
WHERE total_price BETWEEN 100000 AND 500000;

```
<br>

* **페이징 처리 (Paging)**: "게시판의 4페이지 데이터를 조회 (페이지당 10개씩 노출)"
```sql
-- 공식: (4페이지 - 1) * 10 = 30개를 건너뜀
-- 최신글이 먼저 오도록 ID 기준 내림차순 정렬 후 10개만 가져옴
SELECT * FROM posts 
ORDER BY id DESC 
LIMIT 30, 10;

```
<br>

* **복합 조건 필터링 (IN & IS NOT NULL)**: "서울 또는 경기에 거주하며 연락처가 등록된 회원 조회"
```sql
SELECT name, address, phone 
FROM customers 
WHERE address IN ('서울', '경기') 
  AND phone IS NOT NULL;

```
<br>

### 핵심 요약

1. **실행 순서**: `FROM` → `WHERE` → `SELECT` → `ORDER BY` → `LIMIT` 순으로 실행.
2. **페이징의 중요성**: 수만 건의 데이터를 한 번에 조회하면 웹 페이지 속도가 매우 느려지므로, `ORDER BY`와 `LIMIT`을 조합한 페이징 처리는 실무에서 필수.
3. **NULL 주의**: `NULL`은 값이 없는 상태이므로 `=` 연산자가 아닌 `IS NULL`을 사용해야 정확히 조회.